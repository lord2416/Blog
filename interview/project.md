# 机器人构建
## 创建机器人
### 首页配置
#### 广告轮播
#### 
## 创建入口
## 创建知识库
### 新增知识库
- 知识库名称：自定义，建议命名xxx知识库。
- 创建完成后，可以对知识库进行修改、状态变更等。
### 创建知识分类
- 三级,其中一级和二级分类，代表用户的意图，第三级分类代表用户的领域。
- 分类名使用文字，尽量不使用特殊字符等，以免影响应答效果。
- 一级分类、二级分类、三级分类可以创建多个，且每个分类下可创建多个子级分类
### FAQ创建、编辑
- 标准答案：标准答案支持图片、超链接、表格、无序列表等，也支持对文字内容进行加粗、颜色调整、下划线等富文本形式操作。
- 标准问句、问题备注、标准答案、备注、所属分类详见批量导入FAQ。
- 状态：有启用和停用两种状态，与生效时间一起使用。停用状态时，不会使用此FAQ知识应答。
- 是否智能补全过滤：如果选择是，那么保存FAQ的时候，这条FAQ就不会同步到输入补全的索引，但是不影响机器人的应答，选择否，则会同步到输入补全索引。智能补全功能目的是为了减少用户输入。智能补全功能效果，详见下方截图。
- 生效时间：FAQ的生效时间，与状态一起使用。比如活动类，配置到期后，此FAQ自动失效不触发。
- 可以预览FAQ答案的展示效果
### 相似问题的创建、编辑
- 手动新增、删除
- 根据深度学习模型自动生成，通过人工审核后，方可应用
- 去重
### FAQ草稿
FAQ在创建或修改时，可提交审核，审核通过的答案方可发布使用，这样确保答案内容正确无误，降低业务风险，同时也跟踪到最后修改人
- 添加：添加FAQ后，点击保存按钮，选择不同的操作备注，可进行审核或不进行审核。
- 修改：修改完FAQ后，点击保存按钮，选择不同的操作备注，可进行审核或不进行审核。处于草稿中的FAQ，修改前的答案仍然对客使用，不会停用该条FAQ。
- 审核通过：点击知识体系下的“FAQ草稿”，点击FAQ问题进入编辑页面，在页面下方可进行审核，审核通过的FAQ，直接发布使用。
- 审核不通过：点击知识体系下的“FAQ草稿”，点击FAQ问题进入编辑页面，在页面下方可进行审核，审核不通过的FAQ，仍存在FAQ草稿中，直到审核通过后，才会发布使用新的FAQ答案。
### 服务引导答案
FAQ服务引导答案的意义在于通过调用业务接口返回给用户差异性答案，比如用户账户状态、用户欠款状态、用户账单日等
### 答案模板答案
此处的答案主要是针对答案需要配置成json串定制的模板，主要用在通过接口调用，需要答案形式为json格式的答案。
- 先配置模板对应的key值信息
- 答案编辑时，选怎模板后，根据对应的名称输入内容
## 对话能力
### 进线配置
- 支持不同终端
### 规则配置
### 词库配置
### 多轮对话
用户输入问题、关键词或进线可触发特定场景，在场景中实现多样化交互，例如多轮对话、表单点选、进线卡片等特殊场景任务
#### 创建及编辑场景
点击“对话配置”-“场景应答”-“场景管理”添加场景，场景名称自定义，可以在备注中对场景进行具体描述。添加后可以进行删除或编辑
#### 对话流程配置
- 点击“对话配置”-“场景应答”-“场景管理”，选择已添加的场景进行配置
- 右上“触发配置”配置该场景/流程被触发的规则，需配置该场景所出现的入口及触发规则；规则支持用户进线，FAQ和关键词；可以有多条规则，彼此之间关系可选。
#### 节点及边配置
- 开始节点为整个流程的起点，建议以话术节点为流程的终点。
- 条件开始为流程中的异常流程控制，即当主流程交互中出现条件开始的规则时，跳转至条件开始流程处执行。
- 线上可以配置该条边的描述，可配置流转的规则；一条线上可以配置多条规则，规则间为与的关系；匹配时则走当前路径进行流转；未配置规则则默认流转；
 1.用户话术中的关键词：用户当前问句中的关键词匹配，默认包含，支持正则；
 2.当前轮话术的意图：当前交互时，用户问句的意图情况
 3.词槽信息（当前轮）：用户当前交互问句中，按照指定词槽提取的信息；
 4.词槽信息（上下轮）：用户当前及当前会话的前序交互问句中，按照指定词槽提取的信息；
 5.全局变量：在“对话流程”页面配置的全局变量
- 交互和话术节点可以配置话术和执行的信息。
- 话术模块：在正常话术和拉回话术中进行话术配置；两个场景均支持终端指定，答案类型指定。
- 正常话术：配置正常情况下给用户的话术；
- 拉回话术：可以进行拉回设置，拉回次数为0，则没有拉回话术编辑框，不为0，则提供拉回话术设置，拉回话术的作用是，当用户问题在一次到达交互节点时，回答内容并没有往触发条件的任意分支走时，会用拉回话术再询问一次用户，以便顺利完成此流程。
- 答案编辑框，支持多终端话术配置（common话术必填），选择插入组件，通过下拉框，选择已有组件插入。
- 执行模块：可以配置当前节点的一些执行行为。
- 自动流转：若勾选自动流转，该节点答案将与后续节点答案共同传递给用户；
- 高级脚本：支持脚本控制参数的情况；
- 请求调用节点：根据配置去调用http接口，获取结果供流程流转；支持GET和POST两种方式，添加header和出参入参；
- 变量编辑：在配置过程中，或“对话流程”页面可以对流程中可能使用到的变量进行配置管理；可自定义变量的编码和名称，变量类型有变量、意图和词槽三种类型，意图和词槽依赖对应的配置，可配置进流程进行使用；通过变量值的配置可以给变量初始化一个值；系统预设变量为userPin（用户id）及channel（入口）；变量支持加密；
#### 意图管理
- 点击“对话配置”-“场景应答”-“场景管理”，选择已添加的场景，点击“意图管理”，新建对话意图。
- 意图为当前场景下，用户可能会涉及的一些意图。意图名称为大写英文和下划线组成；意图别名为意图的通俗名称，可用于反问；关联词槽为当前意图可能关联的业务参数;
#### 词槽管理
词槽可以认为是业务关联的信息。
- 点击新建词槽新建一个词槽，词槽的编辑分为两步
#### 对话模板管理
- 点击“对话配置”-“场景应答”-“场景管理”，选择已添加的场景，点击“对话模板管理”，进入对话模板管理页面。
- 对话模板和意图做绑定，可以通过识别用户问句是否命中对话模板来映射到绑定的意图上。同时，对话模板可以根据配置的情况提取模板匹配到的信息。
- 模板本身的配置是用以描述用户问句的，由业务词和词槽组成，可以标识顺序情况
- 点击“新建对话模板”，添加对话模板，配置页面如下。选择已配置的意图，系统会自动带入该意图相关联的词槽信息，也会带入已配置的业务词信息（可在编辑页面点击新建业务词添加）；选择某个元素（词槽或业务词），可以配置其是否必须匹配以及其在当前对话模板中的顺序，0代表任意位置；模板片段配置完毕后，可以调整阈值，即整个对话模板的匹配程度；下面是一个配置好的对话模板的示例
#### 业务词管理
- 点击“对话配置”-“场景应答”-“场景管理”，选择已添加的场景，点击“业务词管理”，进入业务词管理页面
- 业务词可以理解为和业务相关的行为描述词，比如查询天气的“多少度”，查询价格的“多少钱”。
- 点击“新建业务词”，添加一个业务词。添加业务词的名称和描述，逐个录入词典值即可。
#### 场景模型
- 点击“对话配置”-“场景应答”-“场景管理”，选择已添加的场景，点击“版本管理”，进入版本管理页面
- 版本和当前的流程相关，可有多个版本，版本训练完成后，只能选择一个版本启用
- 点击“发布”，添加发布名称，即可发布新的版本，也可选择高级配置功能，高级配置提供了训练语料可以自行上传语料（语料模板在下载模板处获取），也可以选择之前训练所用语料完成
- 发布之后，等待训练完毕后，可以编辑启用状态，启用当前版本
### 破冰管理
当用户在设定时间内没有再次咨询，且用户标签是配置的标签，机器人会自动推送一条配置的破冰话术。破冰场景配置如下：
- 设置破冰时间
- 创建破冰场景
### 闲聊配置
闲聊指非业务领域的问题，闲聊库的建立能使机器人知识覆盖更广；支持闲聊的增、删、改、查、导出、启用、停用，可视化的配置，维护方便、灵活
- 如需使用自定义闲聊语料，需要在“机器人构建”-“构建管理”-“功能配置”页面，开启移动端或PC端的开关。
- 点击“知识构建”-“闲聊配置”按钮，可自定义闲聊语料。
- 闲聊语料跟FAQ知识类似，需要先添加分类，然后在添加语料内容，确保每个语料都有分类，分类常见的有客套话术、天气、敏感词、脏话、百科等。
- 闲聊语料可配置多答案进行应答，当配置多个答案的时候，所有答案随机应答。
## 模型训练
当企业的业务类型及使用场景不同时，所需机器人的语义模型不同，为帮助企业中的训练师通过数据训练出满足自己业务需求的AI语义模型，特设置模型训练功能。通过模型训练，可以快速、灵活地按照自身的业务需求训练AI语义模型，提升机器人的应答准确率。

训练语料：即参与模型训练的语言材料，基于训练语料对模型进行构建。选择一般有以下要求：语料样本尽可能大、语料多样化，语料样本质量较高。
模型空间：存放相同模型功能的空间模块，比如，精确匹配就是一个模型空间，里面可以存放多个已经训练的精确匹配模型，但只有一个启用的模型。
模型启用：模型启用即模型正式启用生效，一个模型空间只有一个启用的模型，在切换模型版本时，会自动停用旧的模型，启用新的模型。
模型训练：模型训练就是用训练语料，通过系统的算法让机器对数据进行深层次的统计分析以进行“自学”，获得了归纳推理和决策能力的过程。
### 模型空间
- 精确匹配模型：主要作用是提升标准FAQ应答的准确率，故在大批量增删改标准问题后，可进行此模型的训练或定期训练，训练语料来源知识库中的标准问题和相似问题，可以在“新增训练”时下载模板查看需要的内容（包括一级分类/二级分类/三级分类/标准问题/相似问题）。
- 相似匹配模型：主要作用是提升标准FAQ下相似问题回答的准确率，故在系统相似问题生成或手动扩写、大批量修改相似问题后可进行此模型的训练或定期训练，训练语料来源知识库中的标准问题和相似问题，可以在“新增训练”时下载模板查看需要的内容（包括一级分类/二级分类/三级分类/标准问题/相似问题）。
- 闲聊业务识别模型：也叫二分类模型，主要作用是提升业务、闲聊识别的准确率,训练语料可来自用户问题或标注语料等。
### 数据标注
机器人与用户已经建立对话后，系统支持对会话数据进行抽样并提供标注功能，模型训练师对会话数据进行指标标注，并利用标注结果训练模型，提升模型应答准确率。
- 标注指标
定义标注指标，用于在标注会话结果，例如正确、错误、分类错误、答案缺失等，支持主指标与副指标定义。
- 数据抽样
创建任务进行抽样，抽样任务中可定义时间、数量、机器人回答类型，可针对特殊回答类型进行采样与标注，进行细分场景分析。
- 数据标注
1. 指标配置
- 指标组名称：自定义，用于区分指标作用，可在数据抽样时勾选。
- 标注操作：可单选或多选。如是单选，只能选择某一个主指标下的某一个副指标进行标注。
- 主指标：指标内容说明。
- 副指标：是对主指标的解释，一个主指标下可有一个或多个副指标。标注时是点击副指标进行标注。
- 绑定计算公式：需填写公式名称，分子和分母，其中分子和分母需在所有副指标中选择。在标注完后系统自动按照公式生成结果。
2. 数据抽样
点击“模型训练”-“数据抽样”，在数据抽样页添加任务。任务创建完成后，需要分配到人具体标注。

## 数据运营
### 数据监控
#### 热点监控
提供对话辅助分析功能，高频热词、TOP问题、高频业务场景统计功能，可关注业务焦点，为运营提供数据支撑，也可起到预警作用。
点击“分析数据”-“热点洞察”查看标准问题推出的排行、不同时间维度的TOP问题、不同时间维度的高频热词、不同场景的会话量。
#### 实时数据
- 系统对进线量，业务问题进行可视化监控。可进行日进线量、小时进线量、月进线量数据对比监控，便于发现异常，及时处理。
- 可点击“运营数据”-“实时数据”查看。
### 数据报表
#### 报表数据

终端日报 | 入口日报
---|---
PV会话量 | 统计进入机器人页面的会话量（含聊天次数等于0的会话）
UV（用户量）| PV按用户名去重的用户量（含聊天次数等于0的会话）
咨询量 | 聊天次数大于0的会话量
有效咨询量 | 已登录用户的咨询量
咨询用户量 | 咨询量按照用户名去重的量
纯聊咨询量 | 同一会话中不涉及业务，且至少有一句话为闲聊
纯业务咨询量 | 同一会话中不涉及闲聊，且至少有一句话为业务

应答日报 | 应答日报
---|---
消息总量 | 指一问一答的总量
直接命中数 | 应答类型为精确回答的数量
理解命中数 | 应答类型为理解回答的数量
引导命中数 | 应答类型为建议引导问题的数量
未命中数 | 应答类型为无法回答的数量
闲聊量 | 闲聊的消息量
业务量 | 业务消息
规则触发量 | 规则触发的消息量
业务直接命中量 | 应答类型为精确回答，场景为业务
闲聊直接命中量 | 应答类型为精确回答，场景为闲聊
业务未命中量 | 应答类型为未知命中，场景为业务
闲聊未命中量 | 应答类型为未知命中，场景为闲聊

#### 对话数据
1. 会话数据
此功能可实时的、直观的查看机器人和用户聊天一通会话的详情。
点击“对话数据”-“会话数据”选择查询时间段，可查看会话维度的机器人与用户聊天详情。
2. 日志明细
日志明细，可查看会话不同业务字段的值，便于分析机器人的应答情况。
点击“应答数据”-“日志明细”选择查询时间段，可查询消息维度的机器人与用户的聊天详情。

#### 系统权限设置
系统提供资源管理，用户管理，权限管理功能。资源：资源包括资源名称与URL路径，资源是页面展示的左侧一级菜单和以及一级菜单下二级菜单所对应的页面。路径可细分到具体页面与操作按钮。
- 权限：用户是否可以访问或操作系统资源。可给不同角色赋予不同的系统资源。
- 用户：系统平台使用者，用户可以按角色进行划分管理。

#### 资源管理
- 在“资源设置”页面，勾选企业资源，勾选一级资源默认勾选全部二级资源，勾选二级资源默认勾选一级资源。
- 如是新创建的子企业，需要先在“机器人构建”-“机器人配置页”创建机器人，再选择相应的机器人进行资源配置。
- 通过对企业资源列表中的数据进行勾选，来控制机器人所能展示的页面资源。

#### 权限管理
- 角色名称：命名角色建议简单明了。
- 管理权限：有非管理员和超级管理员、一般管理员；
- 超级管理员有机器人创建、资源管理、权限管理、用户管理权限。
- 一般管理员可创建用户，但无法创建机器人、进行分配权限。
- 非管理员无权限管理展示页，也无法创建机器人。
- 角色状态：有启用和停用两种状态。
- 角色权限：通过企业资源列表中的数据进行勾选，来控制机器人所能展示的页面资源。

#### 用户管理
点击右上角“用户管理”可添加用户、删除用户，修改用户信息、重置登录密码。